{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\danie\\\\Documents\\\\Emergentes1\\\\BigData\\\\Emergentes_BigData\\\\FrontEnd_Equipo3\\\\src\\\\components\\\\SoterradoDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport { socket } from \"../socket\";\nimport { Chart, registerables } from \"chart.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChart.register(...registerables);\nfunction SoterradoDashboard() {\n  _s();\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    let interval;\n    try {\n      // =====================================\n      //  MODO BACKEND REAL (Socket.IO)\n      // =====================================\n      socket.on(\"nuevoDatoSoterrado\", dato => {\n        // Cuando est茅 activo, los datos tendr谩n la forma:\n        // { time, object: { vibration, methane, moisture, temperature } }\n        setData(prev => [...prev.slice(-19), dato]);\n      });\n\n      // =====================================\n      // И MODO SIMULACIN (sin backend)\n      // =====================================\n      interval = setInterval(() => {\n        const simulacion = {\n          time: new Date().toISOString(),\n          object: {\n            vibration: (Math.random() * 100).toFixed(2),\n            methane: (Math.random() * 10).toFixed(2),\n            moisture: (30 + Math.random() * 60).toFixed(2),\n            temperature: (12 + Math.random() * 10).toFixed(2)\n          }\n        };\n        setData(prev => [...prev.slice(-19), simulacion]);\n      }, 1000);\n    } catch (err) {\n      console.warn(\"锔 Sin conexi贸n al backend, usando datos simulados...\");\n    }\n    return () => {\n      socket.off(\"nuevoDatoSoterrado\");\n      clearInterval(interval);\n    };\n  }, []);\n  const chartData = {\n    labels: data.map(d => new Date(d.time).toLocaleTimeString()),\n    datasets: [{\n      label: \"Vibraci贸n (Hz)\",\n      data: data.map(d => d.object.vibration),\n      borderColor: \"purple\",\n      fill: false\n    }, {\n      label: \"Metano (ppm)\",\n      data: data.map(d => d.object.methane),\n      borderColor: \"orange\",\n      fill: false\n    }, {\n      label: \"Temperatura (掳C)\",\n      data: data.map(d => d.object.temperature),\n      borderColor: \"red\",\n      fill: false\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83C\\uDF0E Sensor Soterrado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"gray\"\n      },\n      children: \"\\uD83D\\uDD01 Datos simulados (1 actualizaci\\xF3n por segundo)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Line, {\n      data: chartData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(SoterradoDashboard, \"IEMTtLVFIuToo7X/raQbJAxzNQU=\");\n_c = SoterradoDashboard;\nexport default SoterradoDashboard;\nvar _c;\n$RefreshReg$(_c, \"SoterradoDashboard\");","map":{"version":3,"names":["React","useEffect","useState","Line","socket","Chart","registerables","jsxDEV","_jsxDEV","register","SoterradoDashboard","_s","data","setData","interval","on","dato","prev","slice","setInterval","simulacion","time","Date","toISOString","object","vibration","Math","random","toFixed","methane","moisture","temperature","err","console","warn","off","clearInterval","chartData","labels","map","d","toLocaleTimeString","datasets","label","borderColor","fill","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","_c","$RefreshReg$"],"sources":["C:/Users/danie/Documents/Emergentes1/BigData/Emergentes_BigData/FrontEnd_Equipo3/src/components/SoterradoDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { socket } from \"../socket\";\r\nimport { Chart, registerables } from \"chart.js\";\r\nChart.register(...registerables);\r\n\r\nfunction SoterradoDashboard() {\r\n  const [data, setData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let interval;\r\n\r\n    try {\r\n      // =====================================\r\n      //  MODO BACKEND REAL (Socket.IO)\r\n      // =====================================\r\n      socket.on(\"nuevoDatoSoterrado\", (dato) => {\r\n        // Cuando est茅 activo, los datos tendr谩n la forma:\r\n        // { time, object: { vibration, methane, moisture, temperature } }\r\n        setData((prev) => [...prev.slice(-19), dato]);\r\n      });\r\n\r\n      // =====================================\r\n      // И MODO SIMULACIN (sin backend)\r\n      // =====================================\r\n      interval = setInterval(() => {\r\n        const simulacion = {\r\n          time: new Date().toISOString(),\r\n          object: {\r\n            vibration: (Math.random() * 100).toFixed(2),\r\n            methane: (Math.random() * 10).toFixed(2),\r\n            moisture: (30 + Math.random() * 60).toFixed(2),\r\n            temperature: (12 + Math.random() * 10).toFixed(2),\r\n          },\r\n        };\r\n        setData((prev) => [...prev.slice(-19), simulacion]);\r\n      }, 1000);\r\n\r\n    } catch (err) {\r\n      console.warn(\"锔 Sin conexi贸n al backend, usando datos simulados...\");\r\n    }\r\n\r\n    return () => {\r\n      socket.off(\"nuevoDatoSoterrado\");\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  const chartData = {\r\n    labels: data.map((d) => new Date(d.time).toLocaleTimeString()),\r\n    datasets: [\r\n      { label: \"Vibraci贸n (Hz)\", data: data.map((d) => d.object.vibration), borderColor: \"purple\", fill: false },\r\n      { label: \"Metano (ppm)\", data: data.map((d) => d.object.methane), borderColor: \"orange\", fill: false },\r\n      { label: \"Temperatura (掳C)\", data: data.map((d) => d.object.temperature), borderColor: \"red\", fill: false },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <h2> Sensor Soterrado</h2>\r\n      <p style={{ color: \"gray\" }}> Datos simulados (1 actualizaci贸n por segundo)</p>\r\n      <Line data={chartData} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SoterradoDashboard;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,IAAI,QAAQ,iBAAiB;AACtC,SAASC,MAAM,QAAQ,WAAW;AAClC,SAASC,KAAK,EAAEC,aAAa,QAAQ,UAAU;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAChDH,KAAK,CAACI,QAAQ,CAAC,GAAGH,aAAa,CAAC;AAEhC,SAASI,kBAAkBA,CAAA,EAAG;EAAAC,EAAA;EAC5B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAEpCD,SAAS,CAAC,MAAM;IACd,IAAIa,QAAQ;IAEZ,IAAI;MACF;MACA;MACA;MACAV,MAAM,CAACW,EAAE,CAAC,oBAAoB,EAAGC,IAAI,IAAK;QACxC;QACA;QACAH,OAAO,CAAEI,IAAI,IAAK,CAAC,GAAGA,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAEF,IAAI,CAAC,CAAC;MAC/C,CAAC,CAAC;;MAEF;MACA;MACA;MACAF,QAAQ,GAAGK,WAAW,CAAC,MAAM;QAC3B,MAAMC,UAAU,GAAG;UACjBC,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;UAC9BC,MAAM,EAAE;YACNC,SAAS,EAAE,CAACC,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,GAAG,EAAEC,OAAO,CAAC,CAAC,CAAC;YAC3CC,OAAO,EAAE,CAACH,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAEC,OAAO,CAAC,CAAC,CAAC;YACxCE,QAAQ,EAAE,CAAC,EAAE,GAAGJ,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAEC,OAAO,CAAC,CAAC,CAAC;YAC9CG,WAAW,EAAE,CAAC,EAAE,GAAGL,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAEC,OAAO,CAAC,CAAC;UAClD;QACF,CAAC;QACDf,OAAO,CAAEI,IAAI,IAAK,CAAC,GAAGA,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAEE,UAAU,CAAC,CAAC;MACrD,CAAC,EAAE,IAAI,CAAC;IAEV,CAAC,CAAC,OAAOY,GAAG,EAAE;MACZC,OAAO,CAACC,IAAI,CAAC,uDAAuD,CAAC;IACvE;IAEA,OAAO,MAAM;MACX9B,MAAM,CAAC+B,GAAG,CAAC,oBAAoB,CAAC;MAChCC,aAAa,CAACtB,QAAQ,CAAC;IACzB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMuB,SAAS,GAAG;IAChBC,MAAM,EAAE1B,IAAI,CAAC2B,GAAG,CAAEC,CAAC,IAAK,IAAIlB,IAAI,CAACkB,CAAC,CAACnB,IAAI,CAAC,CAACoB,kBAAkB,CAAC,CAAC,CAAC;IAC9DC,QAAQ,EAAE,CACR;MAAEC,KAAK,EAAE,gBAAgB;MAAE/B,IAAI,EAAEA,IAAI,CAAC2B,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAAChB,MAAM,CAACC,SAAS,CAAC;MAAEmB,WAAW,EAAE,QAAQ;MAAEC,IAAI,EAAE;IAAM,CAAC,EAC1G;MAAEF,KAAK,EAAE,cAAc;MAAE/B,IAAI,EAAEA,IAAI,CAAC2B,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAAChB,MAAM,CAACK,OAAO,CAAC;MAAEe,WAAW,EAAE,QAAQ;MAAEC,IAAI,EAAE;IAAM,CAAC,EACtG;MAAEF,KAAK,EAAE,kBAAkB;MAAE/B,IAAI,EAAEA,IAAI,CAAC2B,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAAChB,MAAM,CAACO,WAAW,CAAC;MAAEa,WAAW,EAAE,KAAK;MAAEC,IAAI,EAAE;IAAM,CAAC;EAE/G,CAAC;EAED,oBACErC,OAAA;IAAKsC,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxBvC,OAAA;MAAAuC,QAAA,EAAI;IAAmB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC5B3C,OAAA;MAAG4C,KAAK,EAAE;QAAEC,KAAK,EAAE;MAAO,CAAE;MAAAN,QAAA,EAAC;IAAgD;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eACjF3C,OAAA,CAACL,IAAI;MAACS,IAAI,EAAEyB;IAAU;MAAAW,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtB,CAAC;AAEV;AAACxC,EAAA,CA1DQD,kBAAkB;AAAA4C,EAAA,GAAlB5C,kBAAkB;AA4D3B,eAAeA,kBAAkB;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}